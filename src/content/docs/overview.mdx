# Hust Media Tech Lab

## Introduction & Core Concepts
Hust Media Tech Lab is a **Distributed Data Middleware** designed to standardize automated workflows and validate data quality through a **Compute Credits** mechanism. The system operates on a high-performance **Client-Server** model, distinctly separating the **API Gateway**, **Core Services**, **Data Pipeline**, and **Verification Engine** to maintain stable **Real-time Latency** for large-scale processing.

Core flow:
- **Data Ingestion → Execution → Validation → Credit Allocation → Resource Balancing**
- **Microservices** organized by functional business logic.
- **Hybrid Delivery**: React for real-time dashboards, Next.js for SEO/SSR documentation.

---

## System Design Goals
- **Scalability**: Horizontal scaling via load offloading; vertical scaling via RAM/GPU expansion.
- **Low Latency**: Two-tier caching strategy (client store + SSR/SSG cache), optimized queries, and strict timeout management.
- **Data Integrity**: Audit chain based on aliases/hashed links to trace data lineage.
- **Threat Intelligence**: Anomaly detection module + AI pipeline for data sanitization.
- **Operational Efficiency**: Automated updates via Git, supporting on-premise + hybrid cloud deployment.

---

## Architecture Overview

### Logical Topology
```text
Client (Web/App)
  -> API Gateway (Nginx / Go / Node)
    -> Core Services (PHP / Go / Python)
      -> Data Stores (MariaDB / MongoDB)
        -> Integrations (MQTT, Cloudflare, Provider APIs)
```

### Data Pipeline
- **Ingestion**: collect tasks, evidence, and status logs.
- **Normalization**: normalize JSON and identify by alias.
- **Verification**: reconcile via third-party APIs + image/video checks.
- **Settlement**: allocate credits, exchange services, update status.

---

## Technology Stack

| Layer | Technology | Role |
| --- | --- | --- |
| Frontend | React / Next.js | Real-time dashboards + SEO/SSR public pages. |
| Mobile | React Native + WebView | Native shell with fast web logic updates. |
| Backend | Node.js / PHP / Go / Python | REST APIs, job queues, automation, AI utilities. |
| Storage | MariaDB / MongoDB | Structured + semi-structured data. |
| Infra | Nginx + Cloudflare Tunnel | Gateway, reverse proxy, IP masking. |

---

## Hybrid Frontend Strategy
**React SPA** handles real-time interactions (dashboards, tasks), while **Next.js** serves entry pages that require SEO/SSR. Both share a **data contract** to prevent behavioral drift.

```text
render(view) -> state.sync(...) -> ui.update(...)
```

**MQTT/WebSocket** keeps the real-time pipeline consistent between React and Next.

---

## Core Modules

### Module A — Community Growth
Facilitates organic interactions (Follow / Like / View) via Smart Matching.

Workflow:
- Campaign Optimization: Breaks outreach goals into small interaction steps.
- Relevant Matching: Pairs content with trusted users by reputation scores.
- Authentic Interaction: Users engage naturally and confirm activity.
- Quality Assurance: Verifies results through a transparent dual-check system.
- Reward Allocation: Updates progress and distributes community credits.

### Module B — Rating with Evidence
Module B boosts **rating/vote** with evidence. Execution time is cleaned using **IQR Filtering** to remove outliers.

```python
q1 = percentile(sorted_data, 25)
q3 = percentile(sorted_data, 75)
iqr = q3 - q1
lower = q1 - 1.0 * iqr
upper = q3 + 1.0 * iqr
filtered = [x for x in sorted_data if lower <= x <= upper]
avg = sum(filtered) / len(filtered)
```

### Module C — Security & Trust Assurance
Module C ensures Community Safety via data verification and feedback:
- Data Standardization: Formats diverse inputs (contacts, links, social profiles) for accuracy.
- Instant Query: Rapidly retrieves status via optimized MongoDB indexes.
- Transparent History: Provides comprehensive safety records from MariaDB.
- AI-Powered Moderation: Validates new reports with a dual-layer AI review system before publishing.

---

## Reward Engine
Reward Points are an **internal currency**:
- Users complete tasks and receive credits.
- Credits fund new tasks to create a self-sustaining loop.
- Alias/shortlinks are used to audit the full task chain.

---

## API & Data Contract

### Mission Creation (P2P)
```json
POST https://domain/api/v3
{
  "action": "add",
  "comments": ["comment_1", "comment_2"],
  "key": "{API_KEY}",
  "link": "{target_link}",
  "quantity": 1000,
  "service": "{service_id}"
}
```

### Response
```json
{ "order": 98412 }
```

---

## Security & Privacy
- **API Key** authenticates requests with rate limiting.
- **Cloudflare Tunnel** masks origin IPs to reduce DDoS risk.
- **Database Hardening**: change default ports, limit privileges, scheduled backups.

```go
c.Header("Access-Control-Allow-Origin", "*")
c.Header("Access-Control-Allow-Methods", "GET, POST, OPTIONS")
c.Header("Access-Control-Allow-Credentials", "true")
```

```yaml
ingress:
  - hostname: ws.hust.media
    service: http://localhost:8793
  - hostname: nginx.hust.media
    service: http://localhost:8794
  - service: http_status:404
```

---

## Deployment & Operations
- **On-prem** servers for core services, hybrid networking via Cloudflare.
- **Auto-restart** sequence: Nginx → Golang → Workers.
- **Git Auto-Update** for fast sync and reduced downtime.

---

## Observability & Reliability
- **Background QA Jobs** review backlog tasks.
- **Audit Trail** tracks full task status and activity history.
- **Alerting** via Telegram + system dashboards.

---

## Performance Benchmarks
- **Local API hop**: 0.01-0.05 ms internal.
- **Timeout Guardrail**: auto-cancel tasks > 180s to avoid overload.
- **Cache Strategy**: client store + SSR cache reduce repeated queries.
- **Hybrid Routing**: fast SSR entry points with smooth real-time interactions.
